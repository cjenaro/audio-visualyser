{"id":"GOKF","dependencies":[{"name":"/home/jenaro/Documents/beginnerJS/audio-visualization/package.json","includedInParent":true,"mtime":1577445885174}],"generated":{"js":"const e=1500,t=1500,n=document.querySelector(\"canvas\"),o=n.getContext(\"2d\");let a,i;async function c(){const e=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(e=>console.log(\"You need to allow permission to the microphone\")),t=new AudioContext;a=t.createAnalyser(),t.createMediaStreamSource(e).connect(a),a.fftSize=1024,i=a.frequencyBinCount;const n=new Uint8Array(i),o=new Uint8Array(i);r(n),s(o)}function r(n){a.getByteTimeDomainData(n),o.clearRect(0,0,e,t),o.lineWidth=10,o.strokeStyle=\"#ff5555\",o.beginPath();const c=e/i;let s=0;n.forEach((e,n)=>{const a=e/128*t/2;0==n?o.moveTo(s,a):o.lineTo(s,a),s+=c}),o.stroke(),requestAnimationFrame(()=>r(n))}function s(n){a.getByteFrequencyData(n);const c=e/i*2.5;let r=0;n.forEach(e=>{const n=t/2*(e/255);o.fillStyle=\"#ff5555\",o.fillRect(r,t-n,c,n),r+=c+1}),requestAnimationFrame(()=>s(n))}n.width=e,n.height=t,c();"},"sourceMaps":{"js":{"mappings":[{"source":"sound.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"sound.js","name":"WIDTH","original":{"line":1,"column":6},"generated":{"line":1,"column":6}},{"source":"sound.js","original":{"line":1,"column":14},"generated":{"line":1,"column":8}},{"source":"sound.js","name":"HEIGHT","original":{"line":2,"column":6},"generated":{"line":1,"column":13}},{"source":"sound.js","original":{"line":2,"column":15},"generated":{"line":1,"column":15}},{"source":"sound.js","name":"canvas","original":{"line":3,"column":6},"generated":{"line":1,"column":20}},{"source":"sound.js","name":"document","original":{"line":3,"column":15},"generated":{"line":1,"column":22}},{"source":"sound.js","name":"querySelector","original":{"line":3,"column":24},"generated":{"line":1,"column":31}},{"source":"sound.js","original":{"line":3,"column":38},"generated":{"line":1,"column":45}},{"source":"sound.js","name":"ctx","original":{"line":4,"column":6},"generated":{"line":1,"column":55}},{"source":"sound.js","name":"canvas","original":{"line":4,"column":12},"generated":{"line":1,"column":57}},{"source":"sound.js","name":"getContext","original":{"line":4,"column":19},"generated":{"line":1,"column":59}},{"source":"sound.js","original":{"line":4,"column":30},"generated":{"line":1,"column":70}},{"source":"sound.js","original":{"line":7,"column":0},"generated":{"line":1,"column":76}},{"source":"sound.js","name":"analyser","original":{"line":7,"column":4},"generated":{"line":1,"column":80}},{"source":"sound.js","name":"bufferLength","original":{"line":8,"column":4},"generated":{"line":1,"column":82}},{"source":"sound.js","original":{"line":10,"column":0},"generated":{"line":1,"column":84}},{"source":"sound.js","name":"getAudio","original":{"line":10,"column":15},"generated":{"line":1,"column":99}},{"source":"sound.js","name":"stream","original":{"line":11,"column":8},"generated":{"line":1,"column":103}},{"source":"sound.js","name":"stream","original":{"line":11,"column":8},"generated":{"line":1,"column":109}},{"source":"sound.js","name":"navigator","original":{"line":11,"column":23},"generated":{"line":1,"column":117}},{"source":"sound.js","name":"mediaDevices","original":{"line":11,"column":33},"generated":{"line":1,"column":127}},{"source":"sound.js","name":"getUserMedia","original":{"line":12,"column":5},"generated":{"line":1,"column":140}},{"source":"sound.js","original":{"line":12,"column":18},"generated":{"line":1,"column":153}},{"source":"sound.js","name":"audio","original":{"line":12,"column":20},"generated":{"line":1,"column":154}},{"source":"sound.js","original":{"line":12,"column":27},"generated":{"line":1,"column":161}},{"source":"sound.js","name":"catch","original":{"line":13,"column":5},"generated":{"line":1,"column":165}},{"source":"sound.js","name":"e","original":{"line":13,"column":11},"generated":{"line":1,"column":171}},{"source":"sound.js","name":"console","original":{"line":13,"column":16},"generated":{"line":1,"column":174}},{"source":"sound.js","name":"log","original":{"line":13,"column":24},"generated":{"line":1,"column":182}},{"source":"sound.js","original":{"line":13,"column":28},"generated":{"line":1,"column":186}},{"source":"sound.js","name":"audioCtx","original":{"line":14,"column":8},"generated":{"line":1,"column":237}},{"source":"sound.js","original":{"line":14,"column":19},"generated":{"line":1,"column":239}},{"source":"sound.js","name":"AudioContext","original":{"line":14,"column":23},"generated":{"line":1,"column":243}},{"source":"sound.js","name":"analyser","original":{"line":15,"column":2},"generated":{"line":1,"column":256}},{"source":"sound.js","name":"audioCtx","original":{"line":15,"column":13},"generated":{"line":1,"column":258}},{"source":"sound.js","name":"createAnalyser","original":{"line":15,"column":22},"generated":{"line":1,"column":260}},{"source":"sound.js","name":"audioCtx","original":{"line":16,"column":14},"generated":{"line":1,"column":277}},{"source":"sound.js","name":"createMediaStreamSource","original":{"line":16,"column":23},"generated":{"line":1,"column":279}},{"source":"sound.js","name":"stream","original":{"line":16,"column":47},"generated":{"line":1,"column":303}},{"source":"sound.js","name":"connect","original":{"line":17,"column":6},"generated":{"line":1,"column":306}},{"source":"sound.js","name":"analyser","original":{"line":17,"column":14},"generated":{"line":1,"column":314}},{"source":"sound.js","name":"analyser","original":{"line":19,"column":2},"generated":{"line":1,"column":317}},{"source":"sound.js","name":"fftSize","original":{"line":19,"column":11},"generated":{"line":1,"column":319}},{"source":"sound.js","original":{"line":19,"column":21},"generated":{"line":1,"column":327}},{"source":"sound.js","name":"bufferLength","original":{"line":21,"column":2},"generated":{"line":1,"column":332}},{"source":"sound.js","name":"analyser","original":{"line":21,"column":17},"generated":{"line":1,"column":334}},{"source":"sound.js","name":"frequencyBinCount","original":{"line":21,"column":26},"generated":{"line":1,"column":336}},{"source":"sound.js","name":"timeData","original":{"line":22,"column":8},"generated":{"line":1,"column":354}},{"source":"sound.js","name":"timeData","original":{"line":22,"column":8},"generated":{"line":1,"column":360}},{"source":"sound.js","original":{"line":22,"column":19},"generated":{"line":1,"column":362}},{"source":"sound.js","name":"Uint8Array","original":{"line":22,"column":23},"generated":{"line":1,"column":366}},{"source":"sound.js","name":"bufferLength","original":{"line":22,"column":34},"generated":{"line":1,"column":377}},{"source":"sound.js","name":"frequencyData","original":{"line":23,"column":8},"generated":{"line":1,"column":380}},{"source":"sound.js","original":{"line":23,"column":24},"generated":{"line":1,"column":382}},{"source":"sound.js","name":"Uint8Array","original":{"line":23,"column":28},"generated":{"line":1,"column":386}},{"source":"sound.js","name":"bufferLength","original":{"line":23,"column":39},"generated":{"line":1,"column":397}},{"source":"sound.js","name":"drawTimeData","original":{"line":24,"column":2},"generated":{"line":1,"column":400}},{"source":"sound.js","name":"timeData","original":{"line":24,"column":15},"generated":{"line":1,"column":402}},{"source":"sound.js","name":"drawFrequencyData","original":{"line":25,"column":2},"generated":{"line":1,"column":405}},{"source":"sound.js","name":"frequencyData","original":{"line":25,"column":20},"generated":{"line":1,"column":407}},{"source":"sound.js","original":{"line":28,"column":0},"generated":{"line":1,"column":410}},{"source":"sound.js","name":"drawTimeData","original":{"line":28,"column":9},"generated":{"line":1,"column":419}},{"source":"sound.js","name":"timeData","original":{"line":28,"column":22},"generated":{"line":1,"column":421}},{"source":"sound.js","name":"analyser","original":{"line":29,"column":2},"generated":{"line":1,"column":424}},{"source":"sound.js","name":"getByteTimeDomainData","original":{"line":29,"column":11},"generated":{"line":1,"column":426}},{"source":"sound.js","name":"timeData","original":{"line":29,"column":33},"generated":{"line":1,"column":448}},{"source":"sound.js","name":"ctx","original":{"line":31,"column":2},"generated":{"line":1,"column":451}},{"source":"sound.js","name":"clearRect","original":{"line":31,"column":6},"generated":{"line":1,"column":453}},{"source":"sound.js","original":{"line":31,"column":16},"generated":{"line":1,"column":463}},{"source":"sound.js","original":{"line":31,"column":19},"generated":{"line":1,"column":465}},{"source":"sound.js","name":"WIDTH","original":{"line":31,"column":22},"generated":{"line":1,"column":467}},{"source":"sound.js","name":"HEIGHT","original":{"line":31,"column":29},"generated":{"line":1,"column":469}},{"source":"sound.js","name":"ctx","original":{"line":33,"column":2},"generated":{"line":1,"column":472}},{"source":"sound.js","name":"lineWidth","original":{"line":33,"column":6},"generated":{"line":1,"column":474}},{"source":"sound.js","original":{"line":33,"column":18},"generated":{"line":1,"column":484}},{"source":"sound.js","name":"ctx","original":{"line":34,"column":2},"generated":{"line":1,"column":487}},{"source":"sound.js","name":"strokeStyle","original":{"line":34,"column":6},"generated":{"line":1,"column":489}},{"source":"sound.js","original":{"line":34,"column":20},"generated":{"line":1,"column":501}},{"source":"sound.js","name":"ctx","original":{"line":35,"column":2},"generated":{"line":1,"column":511}},{"source":"sound.js","name":"beginPath","original":{"line":35,"column":6},"generated":{"line":1,"column":513}},{"source":"sound.js","name":"sliceWidth","original":{"line":36,"column":8},"generated":{"line":1,"column":525}},{"source":"sound.js","name":"sliceWidth","original":{"line":36,"column":8},"generated":{"line":1,"column":531}},{"source":"sound.js","name":"WIDTH","original":{"line":36,"column":21},"generated":{"line":1,"column":533}},{"source":"sound.js","name":"bufferLength","original":{"line":36,"column":29},"generated":{"line":1,"column":535}},{"source":"sound.js","name":"x","original":{"line":37,"column":6},"generated":{"line":1,"column":537}},{"source":"sound.js","name":"x","original":{"line":37,"column":6},"generated":{"line":1,"column":541}},{"source":"sound.js","original":{"line":37,"column":10},"generated":{"line":1,"column":543}},{"source":"sound.js","name":"timeData","original":{"line":38,"column":2},"generated":{"line":1,"column":545}},{"source":"sound.js","name":"forEach","original":{"line":38,"column":11},"generated":{"line":1,"column":547}},{"source":"sound.js","original":{"line":38,"column":19},"generated":{"line":1,"column":555}},{"source":"sound.js","name":"data","original":{"line":38,"column":20},"generated":{"line":1,"column":556}},{"source":"sound.js","name":"i","original":{"line":38,"column":26},"generated":{"line":1,"column":558}},{"source":"sound.js","name":"v","original":{"line":39,"column":10},"generated":{"line":1,"column":563}},{"source":"sound.js","name":"y","original":{"line":40,"column":10},"generated":{"line":1,"column":569}},{"source":"sound.js","name":"data","original":{"line":39,"column":14},"generated":{"line":1,"column":571}},{"source":"sound.js","original":{"line":39,"column":21},"generated":{"line":1,"column":573}},{"source":"sound.js","name":"HEIGHT","original":{"line":40,"column":19},"generated":{"line":1,"column":577}},{"source":"sound.js","original":{"line":40,"column":29},"generated":{"line":1,"column":579}},{"source":"sound.js","original":{"line":41,"column":13},"generated":{"line":1,"column":581}},{"source":"sound.js","name":"i","original":{"line":41,"column":8},"generated":{"line":1,"column":584}},{"source":"sound.js","name":"ctx","original":{"line":42,"column":6},"generated":{"line":1,"column":586}},{"source":"sound.js","name":"moveTo","original":{"line":42,"column":10},"generated":{"line":1,"column":588}},{"source":"sound.js","name":"x","original":{"line":42,"column":17},"generated":{"line":1,"column":595}},{"source":"sound.js","name":"y","original":{"line":42,"column":20},"generated":{"line":1,"column":597}},{"source":"sound.js","name":"ctx","original":{"line":44,"column":6},"generated":{"line":1,"column":600}},{"source":"sound.js","name":"lineTo","original":{"line":44,"column":10},"generated":{"line":1,"column":602}},{"source":"sound.js","name":"x","original":{"line":44,"column":17},"generated":{"line":1,"column":609}},{"source":"sound.js","name":"y","original":{"line":44,"column":20},"generated":{"line":1,"column":611}},{"source":"sound.js","name":"x","original":{"line":47,"column":4},"generated":{"line":1,"column":614}},{"source":"sound.js","name":"sliceWidth","original":{"line":47,"column":9},"generated":{"line":1,"column":617}},{"source":"sound.js","name":"ctx","original":{"line":50,"column":2},"generated":{"line":1,"column":621}},{"source":"sound.js","name":"stroke","original":{"line":50,"column":6},"generated":{"line":1,"column":623}},{"source":"sound.js","name":"requestAnimationFrame","original":{"line":52,"column":2},"generated":{"line":1,"column":632}},{"source":"sound.js","original":{"line":52,"column":24},"generated":{"line":1,"column":654}},{"source":"sound.js","name":"drawTimeData","original":{"line":52,"column":30},"generated":{"line":1,"column":658}},{"source":"sound.js","name":"timeData","original":{"line":52,"column":43},"generated":{"line":1,"column":660}},{"source":"sound.js","original":{"line":55,"column":0},"generated":{"line":1,"column":664}},{"source":"sound.js","name":"drawFrequencyData","original":{"line":55,"column":9},"generated":{"line":1,"column":673}},{"source":"sound.js","name":"frequencyData","original":{"line":55,"column":27},"generated":{"line":1,"column":675}},{"source":"sound.js","name":"analyser","original":{"line":56,"column":2},"generated":{"line":1,"column":678}},{"source":"sound.js","name":"getByteFrequencyData","original":{"line":56,"column":11},"generated":{"line":1,"column":680}},{"source":"sound.js","name":"frequencyData","original":{"line":56,"column":32},"generated":{"line":1,"column":701}},{"source":"sound.js","name":"barWidth","original":{"line":57,"column":8},"generated":{"line":1,"column":704}},{"source":"sound.js","name":"barWidth","original":{"line":57,"column":8},"generated":{"line":1,"column":710}},{"source":"sound.js","name":"WIDTH","original":{"line":57,"column":19},"generated":{"line":1,"column":712}},{"source":"sound.js","name":"bufferLength","original":{"line":57,"column":27},"generated":{"line":1,"column":714}},{"source":"sound.js","original":{"line":57,"column":42},"generated":{"line":1,"column":716}},{"source":"sound.js","name":"x","original":{"line":59,"column":6},"generated":{"line":1,"column":720}},{"source":"sound.js","name":"x","original":{"line":59,"column":6},"generated":{"line":1,"column":724}},{"source":"sound.js","original":{"line":59,"column":10},"generated":{"line":1,"column":726}},{"source":"sound.js","name":"frequencyData","original":{"line":60,"column":2},"generated":{"line":1,"column":728}},{"source":"sound.js","name":"forEach","original":{"line":60,"column":16},"generated":{"line":1,"column":730}},{"source":"sound.js","name":"amount","original":{"line":60,"column":24},"generated":{"line":1,"column":738}},{"source":"sound.js","name":"percent","original":{"line":61,"column":10},"generated":{"line":1,"column":742}},{"source":"sound.js","name":"barHeight","original":{"line":62,"column":10},"generated":{"line":1,"column":748}},{"source":"sound.js","name":"HEIGHT","original":{"line":62,"column":22},"generated":{"line":1,"column":750}},{"source":"sound.js","original":{"line":62,"column":29},"generated":{"line":1,"column":752}},{"source":"sound.js","name":"amount","original":{"line":61,"column":20},"generated":{"line":1,"column":755}},{"source":"sound.js","original":{"line":61,"column":29},"generated":{"line":1,"column":757}},{"source":"sound.js","name":"ctx","original":{"line":63,"column":4},"generated":{"line":1,"column":762}},{"source":"sound.js","name":"fillStyle","original":{"line":63,"column":8},"generated":{"line":1,"column":764}},{"source":"sound.js","original":{"line":63,"column":20},"generated":{"line":1,"column":774}},{"source":"sound.js","name":"ctx","original":{"line":64,"column":4},"generated":{"line":1,"column":784}},{"source":"sound.js","name":"fillRect","original":{"line":64,"column":8},"generated":{"line":1,"column":786}},{"source":"sound.js","name":"x","original":{"line":64,"column":17},"generated":{"line":1,"column":795}},{"source":"sound.js","name":"HEIGHT","original":{"line":64,"column":20},"generated":{"line":1,"column":797}},{"source":"sound.js","name":"barHeight","original":{"line":64,"column":29},"generated":{"line":1,"column":799}},{"source":"sound.js","name":"barWidth","original":{"line":64,"column":40},"generated":{"line":1,"column":801}},{"source":"sound.js","name":"barHeight","original":{"line":64,"column":50},"generated":{"line":1,"column":803}},{"source":"sound.js","name":"x","original":{"line":65,"column":4},"generated":{"line":1,"column":806}},{"source":"sound.js","name":"barWidth","original":{"line":65,"column":9},"generated":{"line":1,"column":809}},{"source":"sound.js","original":{"line":65,"column":20},"generated":{"line":1,"column":811}},{"source":"sound.js","name":"requestAnimationFrame","original":{"line":69,"column":2},"generated":{"line":1,"column":815}},{"source":"sound.js","original":{"line":69,"column":24},"generated":{"line":1,"column":837}},{"source":"sound.js","name":"drawFrequencyData","original":{"line":69,"column":30},"generated":{"line":1,"column":841}},{"source":"sound.js","name":"frequencyData","original":{"line":69,"column":48},"generated":{"line":1,"column":843}},{"source":"sound.js","name":"canvas","original":{"line":5,"column":0},"generated":{"line":1,"column":847}},{"source":"sound.js","name":"width","original":{"line":5,"column":7},"generated":{"line":1,"column":849}},{"source":"sound.js","name":"WIDTH","original":{"line":5,"column":15},"generated":{"line":1,"column":855}},{"source":"sound.js","name":"canvas","original":{"line":6,"column":0},"generated":{"line":1,"column":857}},{"source":"sound.js","name":"height","original":{"line":6,"column":7},"generated":{"line":1,"column":859}},{"source":"sound.js","name":"HEIGHT","original":{"line":6,"column":16},"generated":{"line":1,"column":866}},{"source":"sound.js","name":"getAudio","original":{"line":72,"column":0},"generated":{"line":1,"column":868}}],"sources":{"sound.js":"const WIDTH = 1500\nconst HEIGHT = 1500\nconst canvas = document.querySelector('canvas')\nconst ctx = canvas.getContext('2d')\ncanvas.width = WIDTH\ncanvas.height = HEIGHT\nlet analyser\nlet bufferLength\n\nasync function getAudio() {\n  const stream = await navigator.mediaDevices\n    .getUserMedia({ audio: true })\n    .catch(e => console.log('You need to allow permission to the microphone'))\n  const audioCtx = new AudioContext()\n  analyser = audioCtx.createAnalyser()\n  const src = audioCtx.createMediaStreamSource(stream)\n  src.connect(analyser)\n\n  analyser.fftSize = 2 ** 10\n\n  bufferLength = analyser.frequencyBinCount\n  const timeData = new Uint8Array(bufferLength)\n  const frequencyData = new Uint8Array(bufferLength)\n  drawTimeData(timeData)\n  drawFrequencyData(frequencyData)\n}\n\nfunction drawTimeData(timeData) {\n  analyser.getByteTimeDomainData(timeData)\n\n  ctx.clearRect(0, 0, WIDTH, HEIGHT)\n\n  ctx.lineWidth = 10\n  ctx.strokeStyle = '#ff5555'\n  ctx.beginPath()\n  const sliceWidth = WIDTH / bufferLength\n  let x = 0\n  timeData.forEach((data, i) => {\n    const v = data / 128\n    const y = (v * HEIGHT) / 2\n    if (i == 0) {\n      ctx.moveTo(x, y)\n    } else {\n      ctx.lineTo(x, y)\n    }\n\n    x += sliceWidth\n  })\n\n  ctx.stroke()\n\n  requestAnimationFrame(() => drawTimeData(timeData))\n}\n\nfunction drawFrequencyData(frequencyData) {\n  analyser.getByteFrequencyData(frequencyData)\n  const barWidth = WIDTH / bufferLength * 2.5\n\n  let x = 0\n  frequencyData.forEach(amount => {\n    const percent = amount / 255\n    const barHeight = HEIGHT/2 * percent\n    ctx.fillStyle = '#ff5555'\n    ctx.fillRect(x, HEIGHT - barHeight, barWidth, barHeight)\n    x += barWidth + 1 \n  })\n\n\n  requestAnimationFrame(() => drawFrequencyData(frequencyData))\n}\n\ngetAudio()\n"},"lineCount":null}},"error":null,"hash":"f1fd10c85e0105524c8d937f390bc1f3","cacheData":{"env":{}}}